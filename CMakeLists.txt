cmake_minimum_required(VERSION 3.21)
project(vdh LANGUAGES CXX)

set(CMAKE_AUTOMOC ON) # The meta object compiler is one of the core functionality of Qt, it reads a C++ header file and if it finds a Q_OBJECT macro, it will produces a C++ source file containing meta object code for the class.
set(CMAKE_AUTORCC ON)
set(CMAKE_AUTOUIC ON) # The user interface compiler is a program that read XML from the .ui file generated by Qt Interface Designer and generate C++ code from it.

set(CMAKE_CXX_STANDARD 14)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

find_package(Qt5 COMPONENTS
        Core
        Gui
        Widgets
        Quick
        QuickControls2
        REQUIRED)

FILE(GLOB_RECURSE SRC_LIST src/*.cpp src/*.h)
message("Src list: ${SRC_LIST}")
#add_executable(vdh main.cpp resources/resources.qrc ${SRC_LIST})

if(ANDROID)
    message("Is android.")
    add_library(${PROJECT_NAME} SHARED
            main.cpp
            resources/resources.qrc
            )
else()
    message("Is not android.")
    add_executable(${PROJECT_NAME}
            main.cpp
            resources/resources.qrc
            )
endif()

target_compile_definitions(${PROJECT_NAME}
        PRIVATE $<$<OR:$<CONFIG:Debug>,$<CONFIG:RelWithDebInfo>>:QT_QML_DEBUG>)
target_link_libraries(${PROJECT_NAME} PRIVATE
        Qt5::Core
        Qt5::Gui
        Qt5::Widgets
        Qt5::Quick
        Qt5::QuickControls2
        )

